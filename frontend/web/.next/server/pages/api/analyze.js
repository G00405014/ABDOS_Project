"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analyze";
exports.ids = ["pages/api/analyze"];
exports.modules = {

/***/ "form-data":
/*!****************************!*\
  !*** external "form-data" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("form-data");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\analyze.js */ \"(api)/./pages/api/analyze.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/analyze\",\n        pathname: \"/api/analyze\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFuYWx5emUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2FuYWx5emUuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDcUQ7QUFDckQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC13ZWIvPzIxM2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhbmFseXplLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYW5hbHl6ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5emVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/analyze.js":
/*!******************************!*\
  !*** ./pages/api/analyze.js ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! form-data */ \"form-data\");\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(form_data__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__, axios__WEBPACK_IMPORTED_MODULE_3__]);\n([formidable__WEBPACK_IMPORTED_MODULE_0__, axios__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n// Disable the default body parser to handle form data\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        console.log(\"API route: Received image analysis request\");\n        // Parse the incoming form data - updated for formidable v4\n        const form = (0,formidable__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            keepExtensions: true\n        });\n        const [fields, files] = await new Promise((resolve, reject)=>{\n            form.parse(req, (err, fields, files)=>{\n                if (err) reject(err);\n                resolve([\n                    fields,\n                    files\n                ]);\n            });\n        });\n        // Check if an image was uploaded\n        if (!files.image) {\n            console.log(\"API route: No image provided in the request\");\n            return res.status(400).json({\n                error: \"No image provided\"\n            });\n        }\n        const imageFile = files.image[0]; // Access the first file in the array\n        console.log(`API route: Processing image: ${imageFile.originalFilename}, size: ${imageFile.size} bytes`);\n        // Create form data for the API request\n        const formData = new (form_data__WEBPACK_IMPORTED_MODULE_4___default())();\n        const fileStream = fs__WEBPACK_IMPORTED_MODULE_1___default().createReadStream(imageFile.filepath);\n        formData.append(\"image\", fileStream);\n        console.log(\"API route: Sending request to backend API at http://localhost:5000/predict\");\n        // Send the image to the Flask backend API\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(\"http://localhost:5000/predict\", formData, {\n                headers: {\n                    ...formData.getHeaders()\n                },\n                // Increase timeout for large images\n                timeout: 30000\n            });\n            console.log(\"API route: Received response from backend API:\", response.status);\n            console.log(\"API route: Response data:\", JSON.stringify(response.data));\n            // Check if the response contains an error\n            if (response.data.error) {\n                console.error(\"API route: Backend returned an error:\", response.data.error);\n                return res.status(500).json({\n                    error: response.data.error,\n                    details: response.data.details || \"No additional details provided\"\n                });\n            }\n            // Map the model's numeric class to human-readable labels and descriptions\n            const classLabels = {\n                0: \"Actinic Keratoses\",\n                1: \"Basal Cell Carcinoma\",\n                2: \"Benign Keratosis\",\n                3: \"Dermatofibroma\",\n                4: \"Melanoma\",\n                5: \"Melanocytic Nevi\",\n                6: \"Vascular Lesions\"\n            };\n            const classDescriptions = {\n                0: \"Rough, scaly patches caused by years of sun exposure. Precancerous and may develop into squamous cell carcinoma if untreated.\",\n                1: \"The most common type of skin cancer. Appears as a pearly or waxy bump, or a flat, flesh-colored or brown scar-like lesion.\",\n                2: \"A non-cancerous growth that develops from keratinocytes. Usually appears as a waxy, scaly, slightly raised growth.\",\n                3: \"A common, benign skin growth that often appears as a small, firm bump. Usually pink to light brown in color.\",\n                4: \"The most serious form of skin cancer. May appear as a new spot or an existing spot that changes in size, shape, or color.\",\n                5: \"Common, usually benign moles. Can be flat or raised, and range from pale to dark brown or black.\",\n                6: \"Benign growths made up of blood vessels. Includes cherry angiomas, hemangiomas, and other vascular anomalies.\"\n            };\n            const riskLevels = {\n                0: \"Moderate\",\n                1: \"High\",\n                2: \"Low\",\n                3: \"Low\",\n                4: \"Very High\",\n                5: \"Low\",\n                6: \"Low\"\n            };\n            const recommendedActions = {\n                0: \"Consult a dermatologist within 1-2 months for evaluation and possible treatment.\",\n                1: \"Seek medical attention within 2-4 weeks. Early treatment has excellent outcomes.\",\n                2: \"Regular monitoring recommended. Consult a dermatologist during your next regular check-up.\",\n                3: \"No immediate action required. Monitor for changes in appearance.\",\n                4: \"Urgent medical attention required. Schedule an appointment with a dermatologist within 1-2 weeks.\",\n                5: \"Regular self-examination recommended. Consult a dermatologist if you notice changes.\",\n                6: \"No immediate action required. Monitor for changes in size or color.\"\n            };\n            // Get the predicted class and confidence from the model response\n            const { predicted_class, confidence } = response.data;\n            console.log(`API route: Prediction result - Class: ${predicted_class}, Confidence: ${confidence}`);\n            // Prepare the enhanced response\n            const result = {\n                predicted_class: predicted_class,\n                confidence: confidence,\n                label: classLabels[predicted_class] || \"Unknown\",\n                description: classDescriptions[predicted_class] || \"No description available\",\n                riskLevel: riskLevels[predicted_class] || \"Unknown\",\n                recommendedAction: recommendedActions[predicted_class] || \"Consult a healthcare professional\",\n                timestamp: new Date().toISOString()\n            };\n            // Clean up the temporary file\n            fs__WEBPACK_IMPORTED_MODULE_1___default().unlinkSync(imageFile.filepath);\n            console.log(\"API route: Temporary file cleaned up\");\n            // Return the enhanced result\n            console.log(\"API route: Sending analysis result to client\");\n            return res.status(200).json(result);\n        } catch (error) {\n            // Clean up the temporary file\n            if (imageFile && imageFile.filepath) {\n                try {\n                    fs__WEBPACK_IMPORTED_MODULE_1___default().unlinkSync(imageFile.filepath);\n                    console.log(\"API route: Temporary file cleaned up after error\");\n                } catch (cleanupError) {\n                    console.error(\"API route: Error cleaning up temporary file:\", cleanupError);\n                }\n            }\n            // Handle different types of errors\n            if (error.response) {\n                // The request was made and the server responded with a status code\n                // that falls out of the range of 2xx\n                console.error(\"API route: Backend API error:\", error.response.status, error.response.data);\n                return res.status(error.response.status).json({\n                    error: error.response.data.error || \"Backend API error\",\n                    details: error.response.data.details || JSON.stringify(error.response.data)\n                });\n            } else if (error.request) {\n                // The request was made but no response was received\n                console.error(\"API route: Backend service unavailable - no response received\");\n                return res.status(503).json({\n                    error: \"Backend service unavailable\",\n                    details: \"Could not connect to the analysis service. Please make sure the backend server is running.\"\n                });\n            } else {\n                // Something happened in setting up the request that triggered an Error\n                console.error(\"API route: Internal server error:\", error.message);\n                return res.status(500).json({\n                    error: \"Internal server error\",\n                    details: error.message\n                });\n            }\n        }\n    } catch (error) {\n        console.error(\"API route: Error processing image:\", error);\n        return res.status(500).json({\n            error: \"Error processing image\",\n            details: error.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQ2xCLG1FQUFtRTtnQkFDbkUscUNBQXFDO2dCQUNyQ3BCLFFBQVFELEtBQUssQ0FBQyxpQ0FBaUNBLE1BQU1xQixRQUFRLENBQUN2QixNQUFNLEVBQUVFLE1BQU1xQixRQUFRLENBQUNPLElBQUk7Z0JBQ3pGLE9BQU9oQyxJQUFJRSxNQUFNLENBQUNFLE1BQU1xQixRQUFRLENBQUN2QixNQUFNLEVBQUVDLElBQUksQ0FBQztvQkFDNUNDLE9BQU9BLE1BQU1xQixRQUFRLENBQUNPLElBQUksQ0FBQzVCLEtBQUssSUFBSTtvQkFDcEM2QixTQUFTN0IsTUFBTXFCLFFBQVEsQ0FBQ08sSUFBSSxDQUFDQyxPQUFPLElBQUlILEtBQUtDLFNBQVMsQ0FBQzNCLE1BQU1xQixRQUFRLENBQUNPLElBQUk7Z0JBQzVFO1lBQ0YsT0FBTyxJQUFJNUIsTUFBTThDLE9BQU8sRUFBRTtnQkFDeEIsb0RBQW9EO2dCQUNwRDdDLFFBQVFELEtBQUssQ0FBQztnQkFDZCxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQkMsT0FBTztvQkFDUDZCLFNBQVM7Z0JBQ1g7WUFDRixPQUFPO2dCQUNMLHVFQUF1RTtnQkFDdkU1QixRQUFRRCxLQUFLLENBQUMscUNBQXFDQSxNQUFNK0MsT0FBTztnQkFDaEUsT0FBT25ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCQyxPQUFPO29CQUNQNkIsU0FBUzdCLE1BQU0rQyxPQUFPO2dCQUN4QjtZQUNGO1FBQ0Y7SUFDRixFQUFFLE9BQU8vQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxzQ0FBc0NBO1FBQ3BELE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLE9BQU87WUFDUDZCLFNBQVM3QixNQUFNK0MsT0FBTztRQUN4QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC13ZWIvLi9wYWdlcy9hcGkvYW5hbHl6ZS5qcz9kMmJhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmb3JtaWRhYmxlIGZyb20gJ2Zvcm1pZGFibGUnO1xyXG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuaW1wb3J0IEZvcm1EYXRhIGZyb20gJ2Zvcm0tZGF0YSc7XHJcblxyXG4vLyBEaXNhYmxlIHRoZSBkZWZhdWx0IGJvZHkgcGFyc2VyIHRvIGhhbmRsZSBmb3JtIGRhdGFcclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdBUEkgcm91dGU6IFJlY2VpdmVkIGltYWdlIGFuYWx5c2lzIHJlcXVlc3QnKTtcclxuICAgIFxyXG4gICAgLy8gUGFyc2UgdGhlIGluY29taW5nIGZvcm0gZGF0YSAtIHVwZGF0ZWQgZm9yIGZvcm1pZGFibGUgdjRcclxuICAgIGNvbnN0IGZvcm0gPSBmb3JtaWRhYmxlKHtcclxuICAgICAga2VlcEV4dGVuc2lvbnM6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgW2ZpZWxkcywgZmlsZXNdID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBmb3JtLnBhcnNlKHJlcSwgKGVyciwgZmllbGRzLCBmaWxlcykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xyXG4gICAgICAgIHJlc29sdmUoW2ZpZWxkcywgZmlsZXNdKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBhbiBpbWFnZSB3YXMgdXBsb2FkZWRcclxuICAgIGlmICghZmlsZXMuaW1hZ2UpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0FQSSByb3V0ZTogTm8gaW1hZ2UgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QnKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBpbWFnZSBwcm92aWRlZCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW1hZ2VGaWxlID0gZmlsZXMuaW1hZ2VbMF07IC8vIEFjY2VzcyB0aGUgZmlyc3QgZmlsZSBpbiB0aGUgYXJyYXlcclxuICAgIGNvbnNvbGUubG9nKGBBUEkgcm91dGU6IFByb2Nlc3NpbmcgaW1hZ2U6ICR7aW1hZ2VGaWxlLm9yaWdpbmFsRmlsZW5hbWV9LCBzaXplOiAke2ltYWdlRmlsZS5zaXplfSBieXRlc2ApO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgZm9ybSBkYXRhIGZvciB0aGUgQVBJIHJlcXVlc3RcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBjb25zdCBmaWxlU3RyZWFtID0gZnMuY3JlYXRlUmVhZFN0cmVhbShpbWFnZUZpbGUuZmlsZXBhdGgpO1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZScsIGZpbGVTdHJlYW0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdBUEkgcm91dGU6IFNlbmRpbmcgcmVxdWVzdCB0byBiYWNrZW5kIEFQSSBhdCBodHRwOi8vbG9jYWxob3N0OjUwMDAvcHJlZGljdCcpO1xyXG4gICAgXHJcbiAgICAvLyBTZW5kIHRoZSBpbWFnZSB0byB0aGUgRmxhc2sgYmFja2VuZCBBUElcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL3ByZWRpY3QnLCBmb3JtRGF0YSwge1xyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIC4uLmZvcm1EYXRhLmdldEhlYWRlcnMoKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIEluY3JlYXNlIHRpbWVvdXQgZm9yIGxhcmdlIGltYWdlc1xyXG4gICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBUEkgcm91dGU6IFJlY2VpdmVkIHJlc3BvbnNlIGZyb20gYmFja2VuZCBBUEk6JywgcmVzcG9uc2Uuc3RhdHVzKTtcclxuICAgICAgY29uc29sZS5sb2coJ0FQSSByb3V0ZTogUmVzcG9uc2UgZGF0YTonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiB0aGUgcmVzcG9uc2UgY29udGFpbnMgYW4gZXJyb3JcclxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdBUEkgcm91dGU6IEJhY2tlbmQgcmV0dXJuZWQgYW4gZXJyb3I6JywgcmVzcG9uc2UuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgICAgICBlcnJvcjogcmVzcG9uc2UuZGF0YS5lcnJvcixcclxuICAgICAgICAgIGRldGFpbHM6IHJlc3BvbnNlLmRhdGEuZGV0YWlscyB8fCAnTm8gYWRkaXRpb25hbCBkZXRhaWxzIHByb3ZpZGVkJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBNYXAgdGhlIG1vZGVsJ3MgbnVtZXJpYyBjbGFzcyB0byBodW1hbi1yZWFkYWJsZSBsYWJlbHMgYW5kIGRlc2NyaXB0aW9uc1xyXG4gICAgICBjb25zdCBjbGFzc0xhYmVscyA9IHtcclxuICAgICAgICAwOiAnQWN0aW5pYyBLZXJhdG9zZXMnLFxyXG4gICAgICAgIDE6ICdCYXNhbCBDZWxsIENhcmNpbm9tYScsXHJcbiAgICAgICAgMjogJ0JlbmlnbiBLZXJhdG9zaXMnLFxyXG4gICAgICAgIDM6ICdEZXJtYXRvZmlicm9tYScsXHJcbiAgICAgICAgNDogJ01lbGFub21hJyxcclxuICAgICAgICA1OiAnTWVsYW5vY3l0aWMgTmV2aScsXHJcbiAgICAgICAgNjogJ1Zhc2N1bGFyIExlc2lvbnMnXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjbGFzc0Rlc2NyaXB0aW9ucyA9IHtcclxuICAgICAgICAwOiAnUm91Z2gsIHNjYWx5IHBhdGNoZXMgY2F1c2VkIGJ5IHllYXJzIG9mIHN1biBleHBvc3VyZS4gUHJlY2FuY2Vyb3VzIGFuZCBtYXkgZGV2ZWxvcCBpbnRvIHNxdWFtb3VzIGNlbGwgY2FyY2lub21hIGlmIHVudHJlYXRlZC4nLFxyXG4gICAgICAgIDE6ICdUaGUgbW9zdCBjb21tb24gdHlwZSBvZiBza2luIGNhbmNlci4gQXBwZWFycyBhcyBhIHBlYXJseSBvciB3YXh5IGJ1bXAsIG9yIGEgZmxhdCwgZmxlc2gtY29sb3JlZCBvciBicm93biBzY2FyLWxpa2UgbGVzaW9uLicsXHJcbiAgICAgICAgMjogJ0Egbm9uLWNhbmNlcm91cyBncm93dGggdGhhdCBkZXZlbG9wcyBmcm9tIGtlcmF0aW5vY3l0ZXMuIFVzdWFsbHkgYXBwZWFycyBhcyBhIHdheHksIHNjYWx5LCBzbGlnaHRseSByYWlzZWQgZ3Jvd3RoLicsXHJcbiAgICAgICAgMzogJ0EgY29tbW9uLCBiZW5pZ24gc2tpbiBncm93dGggdGhhdCBvZnRlbiBhcHBlYXJzIGFzIGEgc21hbGwsIGZpcm0gYnVtcC4gVXN1YWxseSBwaW5rIHRvIGxpZ2h0IGJyb3duIGluIGNvbG9yLicsXHJcbiAgICAgICAgNDogJ1RoZSBtb3N0IHNlcmlvdXMgZm9ybSBvZiBza2luIGNhbmNlci4gTWF5IGFwcGVhciBhcyBhIG5ldyBzcG90IG9yIGFuIGV4aXN0aW5nIHNwb3QgdGhhdCBjaGFuZ2VzIGluIHNpemUsIHNoYXBlLCBvciBjb2xvci4nLFxyXG4gICAgICAgIDU6ICdDb21tb24sIHVzdWFsbHkgYmVuaWduIG1vbGVzLiBDYW4gYmUgZmxhdCBvciByYWlzZWQsIGFuZCByYW5nZSBmcm9tIHBhbGUgdG8gZGFyayBicm93biBvciBibGFjay4nLFxyXG4gICAgICAgIDY6ICdCZW5pZ24gZ3Jvd3RocyBtYWRlIHVwIG9mIGJsb29kIHZlc3NlbHMuIEluY2x1ZGVzIGNoZXJyeSBhbmdpb21hcywgaGVtYW5naW9tYXMsIGFuZCBvdGhlciB2YXNjdWxhciBhbm9tYWxpZXMuJ1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgcmlza0xldmVscyA9IHtcclxuICAgICAgICAwOiAnTW9kZXJhdGUnLFxyXG4gICAgICAgIDE6ICdIaWdoJyxcclxuICAgICAgICAyOiAnTG93JyxcclxuICAgICAgICAzOiAnTG93JyxcclxuICAgICAgICA0OiAnVmVyeSBIaWdoJyxcclxuICAgICAgICA1OiAnTG93JyxcclxuICAgICAgICA2OiAnTG93J1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVjb21tZW5kZWRBY3Rpb25zID0ge1xyXG4gICAgICAgIDA6ICdDb25zdWx0IGEgZGVybWF0b2xvZ2lzdCB3aXRoaW4gMS0yIG1vbnRocyBmb3IgZXZhbHVhdGlvbiBhbmQgcG9zc2libGUgdHJlYXRtZW50LicsXHJcbiAgICAgICAgMTogJ1NlZWsgbWVkaWNhbCBhdHRlbnRpb24gd2l0aGluIDItNCB3ZWVrcy4gRWFybHkgdHJlYXRtZW50IGhhcyBleGNlbGxlbnQgb3V0Y29tZXMuJyxcclxuICAgICAgICAyOiAnUmVndWxhciBtb25pdG9yaW5nIHJlY29tbWVuZGVkLiBDb25zdWx0IGEgZGVybWF0b2xvZ2lzdCBkdXJpbmcgeW91ciBuZXh0IHJlZ3VsYXIgY2hlY2stdXAuJyxcclxuICAgICAgICAzOiAnTm8gaW1tZWRpYXRlIGFjdGlvbiByZXF1aXJlZC4gTW9uaXRvciBmb3IgY2hhbmdlcyBpbiBhcHBlYXJhbmNlLicsXHJcbiAgICAgICAgNDogJ1VyZ2VudCBtZWRpY2FsIGF0dGVudGlvbiByZXF1aXJlZC4gU2NoZWR1bGUgYW4gYXBwb2ludG1lbnQgd2l0aCBhIGRlcm1hdG9sb2dpc3Qgd2l0aGluIDEtMiB3ZWVrcy4nLFxyXG4gICAgICAgIDU6ICdSZWd1bGFyIHNlbGYtZXhhbWluYXRpb24gcmVjb21tZW5kZWQuIENvbnN1bHQgYSBkZXJtYXRvbG9naXN0IGlmIHlvdSBub3RpY2UgY2hhbmdlcy4nLFxyXG4gICAgICAgIDY6ICdObyBpbW1lZGlhdGUgYWN0aW9uIHJlcXVpcmVkLiBNb25pdG9yIGZvciBjaGFuZ2VzIGluIHNpemUgb3IgY29sb3IuJ1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gR2V0IHRoZSBwcmVkaWN0ZWQgY2xhc3MgYW5kIGNvbmZpZGVuY2UgZnJvbSB0aGUgbW9kZWwgcmVzcG9uc2VcclxuICAgICAgY29uc3QgeyBwcmVkaWN0ZWRfY2xhc3MsIGNvbmZpZGVuY2UgfSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBBUEkgcm91dGU6IFByZWRpY3Rpb24gcmVzdWx0IC0gQ2xhc3M6ICR7cHJlZGljdGVkX2NsYXNzfSwgQ29uZmlkZW5jZTogJHtjb25maWRlbmNlfWApO1xyXG4gICAgICBcclxuICAgICAgLy8gUHJlcGFyZSB0aGUgZW5oYW5jZWQgcmVzcG9uc2VcclxuICAgICAgY29uc3QgcmVzdWx0ID0ge1xyXG4gICAgICAgIHByZWRpY3RlZF9jbGFzczogcHJlZGljdGVkX2NsYXNzLFxyXG4gICAgICAgIGNvbmZpZGVuY2U6IGNvbmZpZGVuY2UsXHJcbiAgICAgICAgbGFiZWw6IGNsYXNzTGFiZWxzW3ByZWRpY3RlZF9jbGFzc10gfHwgJ1Vua25vd24nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBjbGFzc0Rlc2NyaXB0aW9uc1twcmVkaWN0ZWRfY2xhc3NdIHx8ICdObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUnLFxyXG4gICAgICAgIHJpc2tMZXZlbDogcmlza0xldmVsc1twcmVkaWN0ZWRfY2xhc3NdIHx8ICdVbmtub3duJyxcclxuICAgICAgICByZWNvbW1lbmRlZEFjdGlvbjogcmVjb21tZW5kZWRBY3Rpb25zW3ByZWRpY3RlZF9jbGFzc10gfHwgJ0NvbnN1bHQgYSBoZWFsdGhjYXJlIHByb2Zlc3Npb25hbCcsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIENsZWFuIHVwIHRoZSB0ZW1wb3JhcnkgZmlsZVxyXG4gICAgICBmcy51bmxpbmtTeW5jKGltYWdlRmlsZS5maWxlcGF0aCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBUEkgcm91dGU6IFRlbXBvcmFyeSBmaWxlIGNsZWFuZWQgdXAnKTtcclxuXHJcbiAgICAgIC8vIFJldHVybiB0aGUgZW5oYW5jZWQgcmVzdWx0XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBUEkgcm91dGU6IFNlbmRpbmcgYW5hbHlzaXMgcmVzdWx0IHRvIGNsaWVudCcpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIENsZWFuIHVwIHRoZSB0ZW1wb3JhcnkgZmlsZVxyXG4gICAgICBpZiAoaW1hZ2VGaWxlICYmIGltYWdlRmlsZS5maWxlcGF0aCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBmcy51bmxpbmtTeW5jKGltYWdlRmlsZS5maWxlcGF0aCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnQVBJIHJvdXRlOiBUZW1wb3JhcnkgZmlsZSBjbGVhbmVkIHVwIGFmdGVyIGVycm9yJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoY2xlYW51cEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBUEkgcm91dGU6IEVycm9yIGNsZWFuaW5nIHVwIHRlbXBvcmFyeSBmaWxlOicsIGNsZWFudXBFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHR5cGVzIG9mIGVycm9yc1xyXG4gICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHtcclxuICAgICAgICAvLyBUaGUgcmVxdWVzdCB3YXMgbWFkZSBhbmQgdGhlIHNlcnZlciByZXNwb25kZWQgd2l0aCBhIHN0YXR1cyBjb2RlXHJcbiAgICAgICAgLy8gdGhhdCBmYWxscyBvdXQgb2YgdGhlIHJhbmdlIG9mIDJ4eFxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSByb3V0ZTogQmFja2VuZCBBUEkgZXJyb3I6JywgZXJyb3IucmVzcG9uc2Uuc3RhdHVzLCBlcnJvci5yZXNwb25zZS5kYXRhKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyhlcnJvci5yZXNwb25zZS5zdGF0dXMpLmpzb24oeyBcclxuICAgICAgICAgIGVycm9yOiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIHx8ICdCYWNrZW5kIEFQSSBlcnJvcicsXHJcbiAgICAgICAgICBkZXRhaWxzOiBlcnJvci5yZXNwb25zZS5kYXRhLmRldGFpbHMgfHwgSlNPTi5zdHJpbmdpZnkoZXJyb3IucmVzcG9uc2UuZGF0YSlcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7XHJcbiAgICAgICAgLy8gVGhlIHJlcXVlc3Qgd2FzIG1hZGUgYnV0IG5vIHJlc3BvbnNlIHdhcyByZWNlaXZlZFxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSByb3V0ZTogQmFja2VuZCBzZXJ2aWNlIHVuYXZhaWxhYmxlIC0gbm8gcmVzcG9uc2UgcmVjZWl2ZWQnKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDMpLmpzb24oeyBcclxuICAgICAgICAgIGVycm9yOiAnQmFja2VuZCBzZXJ2aWNlIHVuYXZhaWxhYmxlJywgXHJcbiAgICAgICAgICBkZXRhaWxzOiAnQ291bGQgbm90IGNvbm5lY3QgdG8gdGhlIGFuYWx5c2lzIHNlcnZpY2UuIFBsZWFzZSBtYWtlIHN1cmUgdGhlIGJhY2tlbmQgc2VydmVyIGlzIHJ1bm5pbmcuJyBcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBTb21ldGhpbmcgaGFwcGVuZWQgaW4gc2V0dGluZyB1cCB0aGUgcmVxdWVzdCB0aGF0IHRyaWdnZXJlZCBhbiBFcnJvclxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSByb3V0ZTogSW50ZXJuYWwgc2VydmVyIGVycm9yOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLCBcclxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQVBJIHJvdXRlOiBFcnJvciBwcm9jZXNzaW5nIGltYWdlOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBlcnJvcjogJ0Vycm9yIHByb2Nlc3NpbmcgaW1hZ2UnLCBcclxuICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZSBcclxuICAgIH0pO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiZm9ybWlkYWJsZSIsImZzIiwicGF0aCIsImF4aW9zIiwiRm9ybURhdGEiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJmb3JtIiwia2VlcEV4dGVuc2lvbnMiLCJmaWVsZHMiLCJmaWxlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicGFyc2UiLCJlcnIiLCJpbWFnZSIsImltYWdlRmlsZSIsIm9yaWdpbmFsRmlsZW5hbWUiLCJzaXplIiwiZm9ybURhdGEiLCJmaWxlU3RyZWFtIiwiY3JlYXRlUmVhZFN0cmVhbSIsImZpbGVwYXRoIiwiYXBwZW5kIiwicmVzcG9uc2UiLCJwb3N0IiwiaGVhZGVycyIsImdldEhlYWRlcnMiLCJ0aW1lb3V0IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJkZXRhaWxzIiwiY2xhc3NMYWJlbHMiLCJjbGFzc0Rlc2NyaXB0aW9ucyIsInJpc2tMZXZlbHMiLCJyZWNvbW1lbmRlZEFjdGlvbnMiLCJwcmVkaWN0ZWRfY2xhc3MiLCJjb25maWRlbmNlIiwicmVzdWx0IiwibGFiZWwiLCJkZXNjcmlwdGlvbiIsInJpc2tMZXZlbCIsInJlY29tbWVuZGVkQWN0aW9uIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidW5saW5rU3luYyIsImNsZWFudXBFcnJvciIsInJlcXVlc3QiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/analyze.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();